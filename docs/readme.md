# PySAM Documentation Notes

This folder contains files to generate the PySAM documentation published at https://nrel-pysam.readthedocs.io.

It uses Sphinx with reStructuredText and the sphinx-rtd-theme: https://www.sphinx-doc.org.

Python docstrings use Sphinx format: https://sphinx-rtd-tutorial.readthedocs.io/en/latest/docstrings.html

## Sphinx and the sphinx-rtd-theme Installation

1. Install Sphinx: https://www.sphinx-doc.org/en/master/usage/installation.html.

2. Install sphinx-rtd-theme: https://pypi.org/project/sphinx-rtd-theme/

### Build Instructions

1. Batch build SAMOS, export_config, and SAM_api. Run CMake first if SSC variables were modified. See https://github.com/NREL/SAM/wiki for instructions.

2. Run export_config:

    * For Windows, in Visual Studio Community, set the export_config project as the startup project (right-click in Solution Explorer) and use the Visual Studio debugger (**Debug, Start without Debugging**). Press any key to close the debug window when it fisnishes.

3. Open a terminal window.    

4. Build PySAM:

    ```
    cd path/to/sam_dev/pysam
    python setup.py install
    ```

    > If there's a link error and Visual Studio is open, try closing it, opening a new terminal window, and running `setup.py` again.

5. Run Sphinx:

    ```
    cd path/to/sam_dev/pysam/docs
    make clean
    make html
    ```

### Folder Structure

The top-level `/docs` folder contains documentation pages written in reStructuredText (`.rst` files), and Sphinx configuration files.

Files in `/modules`, `/lists`, `/version_changes` are automatically generated by the documentation build process. *Do not modify files in these folders.*

The `/images` folder contains `.png` files for the documentation pages.

By default, Sphinx places the output HTML and supporting files in the `/_build` folder.

### Making Revisions

The documentation structure is defined by `toctree` in `index.rst`.

To revise content in documentation pages, edit the `.rst` file in the `/docs` folder.

To revise autogenerated text in compute module documentation, edit  `builder_PySAM.cpp` and/or `export_config.cpp` as needed. Both of these files are part of the `export_config` project in the `path/to/sam_dev/sam/api/api_autogen` folder.
